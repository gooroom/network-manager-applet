#!/usr/bin/make -f

include /usr/share/dpkg/architecture.mk

export DEB_LDFLAGS_MAINT_APPEND = -Wl,-z,defs -Wl,--as-needed

%:
	dh $@ --with gir,translations

override_dh_autoreconf:
	dh_autoreconf --as-needed

override_dh_auto_configure:
	dh_auto_configure -- \
		--libexecdir=/usr/lib/NetworkManager \
		--disable-more-warnings \
		--disable-static \
		--enable-introspection \
		--enable-gtk-doc \
		--with-appindicator=ubuntu \
		--with-gcr \
		--with-libnm-gtk \
		--with-selinux \
		--with-wwan

override_dh_install:
	find debian/tmp -name '*.la' -print -delete
	# Let's drop the gir1.2-nmgtk-1.0 package now
	find debian/tmp -name NMGtk-1.0.* -print -delete
	dh_install

override_dh_missing:
	dh_missing --fail-missing
